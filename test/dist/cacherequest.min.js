var CacheRequest=function(){var a=window.hasOwnProperty("jQuery"),b=function(){function b(a,b){var c;b.status>200?(c="error",a.error(b,c)):(c=b.statusText,a.success(b.responseText,c,b)),a.complete(b,c)}return a?jQuery.ajax:function(a){var c=new XMLHttpRequest;c.open(a.type||"GET",a.url,a.async||!0),c.onload=b.bind(this,a,c),c.onerror=b.bind(this,a,c),c.send()}}(),c=function(){function a(a){c(a);var b=f();b?g():h()}function c(a){m.opt=a,d(),e()}function d(){m.hash=m.opt.url+""+(m.opt.data||"")+(m.opt.method||"-ANY")}function e(){m.stored=localStorage.getItem(m.hash),m.stored=JSON.parse(m.stored)||null}function f(){if(!m.stored)return!1;var a=m.stored[m.storageKeys.timeout],b=m.stored[m.storageKeys.lastcall];return Date.now()-b<a}function g(){m.opt.hasOwnProperty("success")?m.opt.success.call(m.opt.context,null,"CACHED",m.stored[m.storageKeys.response]):m.opt.hasOwnProperty("complete")&&m.opt.complete.call(m.opt.context,m.stored[m.storageKeys.response],"CACHED")}function h(){m.originalSettings={s:m.opt.success,f:m.opt.error,c:m.opt.complete,ctx:m.opt.context},m.opt.success=i,m.opt.error=j,m.opt.complete=k,m.opt.context=m,b(m.opt)}function i(a,b,c){l(c),m.originalSettings.s&&m.originalSettings.s.call(m.originalSettings.ctx,a,b,c)}function j(a,b,c){m.originalSettings.e&&m.originalSettings.call(m.originalSettings.ctx,a,b,c)}function k(a,b){(0===a.status||"error"===b)&&(a=m.opt.useOldIfError&&m.stored?m.stored[m.storageKeys.response]:null),m.originalSettings.c?m.originalSettings.c.call(m.originalSettings.ctx,a,b):console.log('No "complete" callback, no connection and no cache available (or you don\'t want it).')}function l(a){var b={};b[m.storageKeys.timeout]=m.opt.cacheTimeout||m.defaultTimeout,b[m.storageKeys.lastcall]=Date.now(),b[m.storageKeys.response]=a,localStorage.setItem(m.hash,JSON.stringify(b))}var m=this;return m.storageKeys={timeout:"TIMEOUT",lastcall:"LASTCALL",response:"RESPONSE"},m.defaultTimeout=3e5,{send:a}};return{send:function(a){var b=new c;return b.send(a)}}}();